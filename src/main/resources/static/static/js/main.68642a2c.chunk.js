(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(e,t,a){e.exports=a(358)},171:function(e,t,a){},358:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(28),i=a.n(r),l=(a(171),a(156)),c=a(15),s=a(16),p=a(18),u=a(17),d=a(19),h=a(6),m=a.n(h),f="/api",g="TestToken",y=a(49),v=a.n(y);function E(){var e=new Headers;return e.append("Content-Type","application/json;charset=UTF-8"),e.append("Authorization","Bearer "+v.a.load(g)),e}var b=a(24),C=a.n(b);function k(e){return fetch("".concat(f,"/department"),{credentials:"same-origin",method:"GET",headers:E()}).then(function(e){return e.redirected?window.location.href=e.url:e.json()}).then(function(t){e&&e(t)}).catch(function(e){console.log(e)})}var w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={departments:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;k(function(t){return e.setState({departments:t})})}},{key:"deleteEmployee",value:function(e){!function(e,t){fetch("".concat(f,"/employee/").concat(e),{credentials:"same-origin",headers:E(),method:"DELETE"}).then(function(e){return e.redirected?window.location.href=e.url:e.json()}).then(function(e){t&&t(e)}).catch(function(e){console.log(e)})}(e,this.props.reload)}},{key:"view",value:function(e){this.props.handleView(e)}},{key:"edit",value:function(e){this.props.handleEdit(e)}},{key:"getDepartment",value:function(e){var t=this.state.departments.find(function(t){return t.id===e});return t?t.name:"DepId: "+e}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.table},o.a.createElement("div",{className:t.tableRow},o.a.createElement("div",{className:t.column}),o.a.createElement("div",{className:t.column}),o.a.createElement("div",{className:t.column},"Id"),o.a.createElement("div",{className:t.column,style:{flexGrow:2}},"Name"),o.a.createElement("div",{className:t.column},"Active"),o.a.createElement("div",{className:t.column},"Department"),o.a.createElement("div",{className:t.column})),this.props.employees.map(function(a){return o.a.createElement("div",{key:a.id,className:t.tableRow},o.a.createElement("div",{className:t.column},o.a.createElement(C.a,{onClick:function(){return e.view(a.id)}},"View")),o.a.createElement("div",{className:t.column},o.a.createElement(C.a,{onClick:function(){return e.edit(a.id)}},"Edit")),o.a.createElement("div",{className:t.column},a.id),o.a.createElement("div",{className:t.column,style:{flexGrow:2}},a.name),o.a.createElement("div",{className:t.column},a.active?"Yes":"No"),o.a.createElement("div",{className:t.column},e.getDepartment(a.depId)),o.a.createElement("div",{className:t.column},o.a.createElement(C.a,{onClick:function(){return e.deleteEmployee(a.id)}},"Delete")))}))}}]),t}(o.a.Component),j=m()(function(e){return{table:{border:"1px solid grey",margin:"20px 0"},tableRow:{display:"flex",fontSize:"14px",borderBottom:"1px solid grey"},column:{flexGrow:1,textAlign:"center",flexBasis:0,borderRight:"1px solid",display:"flex",justifyContent:"center",alignItems:"center"}}},{withTheme:!0})(w),O=a(158),N=a(102),x=a.n(N);var P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",null,o.a.createElement(x.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.props.open,disableBackdropClick:this.props.disableClose,onClose:this.props.onClose,style:{overflowY:"hidden"}},o.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)"),overflowY:"auto",maxHeight:"90%"},className:e.paper},this.props.children)))}}]),t}(o.a.Component),S=Object(O.withStyles)(function(e){return{paper:{position:"absolute",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:"30px 80px 40px",outline:"none",width:450,borderRadius:10},root:{width:"100%",backgroundColor:e.palette.background.paper},bot:{color:"#b0b0b0!important"},flex:{},container:{},menuButton:{},loader:{position:"absolute",left:"50%",marginLeft:"-35px",top:"40%",zIndex:9999},buttonHolder:{marginTop:40,display:"flex",justifyContent:"flex-end"}}})(P),T=a(68),I=a.n(T),M=a(160),A=a.n(M),B=a(159),D=a.n(B),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({checked:e.target.checked})},a.state={name:"",checked:!0,departments:[],depId:1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e,t,a=this;k(function(e){return a.setState({departments:e})}),this.props.employeeId&&(e=this.props.employeeId,t=function(e,t,n){return a.setState({name:e,active:t,depId:n})},fetch("".concat(f,"/employee/").concat(e),{credentials:"same-origin",headers:E(),method:"GET"}).then(function(e){return e.redirected?window.location.href=e.url:e.json()}).then(function(e){t&&t(e.name,e.active,e.depId)}).catch(function(e){console.log(e)}))}},{key:"createNewEmployee",value:function(){var e={name:this.state.name,active:this.state.checked,depId:this.state.depId};this.props.employeeId?(e.id=this.props.employeeId,function(e,t){fetch("".concat(f,"/employee"),{credentials:"same-origin",headers:E(),method:"PUT",body:JSON.stringify(e)}).then(function(e){return e.redirected?window.location.href=e.url:e.json()}).then(function(e){t&&t(e)}).catch(function(e){console.log(e)})}(e,this.props.onCreate)):function(e,t){fetch("".concat(f,"/employee"),{credentials:"same-origin",headers:E(),method:"POST",body:JSON.stringify(e)}).then(function(e){return e.redirected?window.location.href=e.url:e.json()}).then(function(e){t&&t(e)}).catch(function(e){console.log(e)})}(e,this.props.onCreate)}},{key:"handleSelect",value:function(e){this.setState({depId:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("h3",null,this.props.employeeId?"Update the ":"Create a new "," Employee"),o.a.createElement(I.a,{value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},disabled:this.props.readOnly,placeholder:"Employee name"}),o.a.createElement(D.a,{control:o.a.createElement(A.a,{checked:this.state.checked,onChange:this.handleChange,color:"primary"}),label:"Active",disabled:this.props.readOnly}),o.a.createElement("select",{value:this.state.depId,disabled:this.props.readOnly,onChange:function(t){return e.handleSelect(t)}},this.state.departments.map(function(e){return o.a.createElement("option",{value:e.id,key:e.id},e.name)})),o.a.createElement("div",{className:t.buttonHolder},!this.props.readOnly&&o.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){return e.createNewEmployee()}},this.props.employeeId?"Update":"Create"),o.a.createElement(C.a,{variant:"contained",onClick:this.props.onClose},"Close")))}}]),t}(o.a.Component),R=m()(function(e){return{buttonHolder:{display:"flex",justifyContent:"space-around",margin:20}}},{withTheme:!0})(L),z=a(161),H=a.n(z),F=a(26),G=a.n(F),W=a(105),J=a(106),U=a(104),V=a.n(U),Y=a(103),$=a.n(Y),q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handleFirstPageButtonClick=function(e){a.props.onChangePage(e,0)},a.handleBackButtonClick=function(e){a.props.onChangePage(e,a.props.page-1)},a.handleNextButtonClick=function(e){a.props.onChangePage(e,a.props.page+1)},a.handleLastPageButtonClick=function(e){a.props.onChangePage(e,Math.max(0,Math.ceil(a.props.count/a.props.rowsPerPage)-1))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.count,r=t.page,i=t.rowsPerPage,l=t.theme;return o.a.createElement("div",{className:a.root},n>0&&o.a.createElement("span",{style:{marginRight:30}},r*i+1," - ",n>(r+1)*i?(r+1)*i:n," of ",n),o.a.createElement(G.a,{color:"primary",onClick:this.handleFirstPageButtonClick,disabled:0===r,"aria-label":"First Page"},"rtl"===l.direction?o.a.createElement($.a,null):o.a.createElement(V.a,null)),o.a.createElement(G.a,{color:"primary",onClick:this.handleBackButtonClick,disabled:0===r,"aria-label":"Previous Page"},"rtl"===l.direction?o.a.createElement(W.a,null):o.a.createElement(J.a,null)),r>2&&"...",r>1&&o.a.createElement(G.a,{color:"primary",className:a.page,onClick:function(t){return e.props.onChangePage(t,e.props.page-2)},"aria-label":"current"},this.props.page-1),r>0&&o.a.createElement(G.a,{color:"primary",className:a.page,onClick:function(t){return e.props.onChangePage(t,e.props.page-1)},"aria-label":"current"},this.props.page),o.a.createElement(G.a,{color:"primary","aria-label":"current",className:a.page,style:{fontWeight:"bold"}},this.props.page+1),r<Math.ceil(n/i)-1&&o.a.createElement(G.a,{color:"primary",className:a.page,onClick:function(t){return e.props.onChangePage(t,e.props.page+1)},"aria-label":"current"},this.props.page+2),r+1<Math.ceil(n/i)-1&&o.a.createElement(G.a,{color:"primary",className:a.page,onClick:function(t){return e.props.onChangePage(t,e.props.page+2)},"aria-label":"current"},this.props.page+3),r+1<Math.ceil(n/i)-1&&"...",o.a.createElement(G.a,{color:"primary",onClick:this.handleNextButtonClick,disabled:r>=Math.ceil(n/i)-1,"aria-label":"Next Page"},"rtl"===l.direction?o.a.createElement(J.a,null):o.a.createElement(W.a,null)),o.a.createElement(G.a,{color:"primary",onClick:this.handleLastPageButtonClick,disabled:r>=Math.ceil(n/i)-1,"aria-label":"Last Page"},"rtl"===l.direction?o.a.createElement(V.a,null):o.a.createElement($.a,null)))}}]),t}(o.a.Component),K=Object(O.withStyles)(function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:2.5*e.spacing.unit},page:{fontSize:"14px"}}},{withTheme:!0})(q),Q=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(H.a,{count:this.props.count,rowsPerPage:this.props.rowsPerPage,rowsPerPageOptions:[5,10,25],page:this.props.page,classes:{caption:e.caption},onChangePage:this.props.onChangePage,ActionsComponent:K,SelectProps:{style:{display:"none"}},labelDisplayedRows:this.props.labelDisplayedRows})}}]),t}(o.a.Component),X=m()(function(e){return{caption:{display:"none!important"}}})(Q),Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={page:0,employees:[],openModal:!1,search:"",perPage:10,count:10,total:0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.searchEmployees()}},{key:"searchEmployees",value:function(){var e,t,a,n,o=this;e=this.state.search,t=this.state.page,a=this.state.perPage,n=function(e){return o.setState({employees:e.data,total:e.total})},fetch("".concat(f,"/employee?search=").concat(e,"&page=").concat(t,"&perPage=").concat(a),{credentials:"same-origin",headers:E(),method:"GET"}).then(function(e){return e.redirected?window.location.href=e.url:e.json()}).then(function(e){n&&n(e)}).catch(function(e){console.log(e)})}},{key:"handleSearch",value:function(e){var t=this;this.setState({search:e},function(){return t.searchEmployees()})}},{key:"openModal",value:function(e,t){this.setState({openModal:!0,employeeId:e,readOnly:t})}},{key:"closeModal",value:function(){this.setState({openModal:!1})}},{key:"onCreate",value:function(){var e=this;this.setState({openModal:!1},function(){return e.searchEmployees()})}},{key:"handleChangePage",value:function(e){var t=this;this.setState({page:e},function(){return t.searchEmployees()})}},{key:"handleCreate",value:function(){this.openModal()}},{key:"handleView",value:function(e){this.openModal(e,!0)}},{key:"handleEdit",value:function(e){this.openModal(e)}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",null,o.a.createElement("div",{className:t.header},o.a.createElement("h4",{className:t.title},"Employee management"),o.a.createElement(C.a,{className:t.logoutButton,onClick:function(){return t=e.props.checkAuth,v.a.remove(g,{path:"/"}),void(t&&t());var t}},"Logout")),o.a.createElement("div",{className:t.content},o.a.createElement("div",{className:t.container},o.a.createElement("div",null,o.a.createElement("p",null,"Search"),o.a.createElement("input",{className:t.search,placeholder:"Type employee name...",value:this.state.search,onChange:function(t){return e.handleSearch(t.target.value)}})),o.a.createElement("div",null,o.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){return e.handleCreate()}},"Create a new employee"))),this.state.employees.length>0?o.a.createElement("div",null,o.a.createElement(j,{handleView:function(t){return e.handleView(t)},handleEdit:function(t){return e.handleEdit(t)},reload:function(){return e.searchEmployees()},employees:this.state.employees}),o.a.createElement(X,{page:this.state.page,rowsPerPage:this.state.perPage,count:this.state.total,onChangePage:function(t,a){return e.handleChangePage(a)}})):o.a.createElement("p",{className:t.noEmployee},"There are no employees yet.")),o.a.createElement(S,{open:this.state.openModal,onClose:function(){return e.closeModal()}},o.a.createElement(R,{employeeId:this.state.employeeId,readOnly:this.state.readOnly,onCreate:function(){return e.onCreate()},onClose:function(){return e.closeModal()}})))}}]),t}(o.a.Component),_=m()(function(e){return{header:{position:"relative",display:"flex",justifyContent:"flex-end",height:80},title:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",color:e.palette.primary.headerText,fontSize:"16px",fontWeight:"bold",lineHeight:"120%"},logoutButton:{height:"100%",padding:"0 20px",color:"#1658F3",fontSize:16,fontWeight:"bold",textTransform:"none",fontFamily:"'Lato', sans-serif"},content:{padding:50},noEmployee:{textAlign:"center",padding:20,color:"grey"},container:{display:"flex",alignItems:"center",justifyContent:"space-between"},search:{padding:10,fontSize:14,outline:"none",borderRadius:5,border:"1px solid grey"}}},{withTheme:!0})(Z),ee=a(22),te=a(34),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleLogin=function(){!function(e,t,a,n){var o={username:e,password:t},r=new Headers;r.append("Content-Type","application/json"),fetch(f+"/login",{method:"POST",headers:r,credentials:"same-origin",body:JSON.stringify(o)}).then(function(e){if(e.ok){var t=e.headers.get("Authorization");null!==t&&v.a.save(g,t,{path:"/"}),a&&a(e)}else n&&n(e)})}(a.state.username,a.state.password,a.props.checkAuth)},a.state={},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e,t){this.setState(Object(ee.a)({},e,t))}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.redirect?o.a.createElement(te.Redirect,{to:"/"}):o.a.createElement("div",{className:t.container},o.a.createElement("h3",{className:t.title},"Login, please..."),o.a.createElement("div",{className:t.inputHolder},o.a.createElement("label",{className:t.inputLabel,htmlFor:"username"},"Username"),o.a.createElement("input",{type:"text",placeholder:"Type your username...",id:"username",className:t.input,onChange:function(t){return e.handleChange("username",t.target.value)},value:this.state.username})),o.a.createElement("div",{className:t.inputHolder},o.a.createElement("label",{className:t.inputLabel,htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",className:t.input,placeholder:"Type your password...",id:"password",onChange:function(t){return e.handleChange("password",t.target.value)},value:this.state.password})),o.a.createElement(C.a,{style:{margin:20},variant:"contained",color:"primary",onClick:this.handleLogin},"Login"))}}]),t}(o.a.Component),ne=m()(function(e){return{title:{color:"#3A3F62",margin:0,fontSize:"18px",fontWeight:"500",padding:20},container:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},inputHolder:{display:"flex",flexDirection:"column",margin:10},input:{padding:10,fontSize:14,outline:"none",borderRadius:5,border:"1px solid grey",width:200},inputLabel:{margin:"10px 0"}}},{withTheme:!0})(ae),oe=a(163),re=a.n(oe),ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={employees:[],search:"",authenticated:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"checkAuth",value:function(){v.a.load(g)?this.setState({authenticated:!0}):this.setState({authenticated:!1})}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.app},o.a.createElement(te.Switch,null,o.a.createElement(te.Route,{path:"/login",component:function(){return o.a.createElement(ne,{redirect:e.state.authenticated,checkAuth:function(){return e.checkAuth()}})}}),o.a.createElement(le,{isAuthenticated:this.state.authenticated,path:"/",component:function(){return o.a.createElement(_,{checkAuth:function(){return e.checkAuth()}})}})))}}]),t}(n.Component),le=function(e){var t=e.component,a=e.isAuthenticated,n=Object(l.a)(e,["component","isAuthenticated"]);return o.a.createElement(te.Route,Object.assign({},n,{render:function(e){return a?o.a.createElement(t,e):o.a.createElement(re.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ce=m()(function(e){return{app:{padding:0}}},{withTheme:!0})(ie);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(69);i.a.render(o.a.createElement(se.a,null,o.a.createElement(te.Route,{component:ce})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[166,1,2]]]);
//# sourceMappingURL=main.68642a2c.chunk.js.map